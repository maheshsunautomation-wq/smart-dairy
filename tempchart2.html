<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Premium Industrial Dashboard</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
/* Body & Background */
body {
  margin: 0;
  font-family: 'Segoe UI', Arial, sans-serif;
  background: #121212;
  color: #fff;
  display: flex;
  justify-content: center;
  align-items: flex-start;
  padding: 40px 20px;
  min-height: 100vh;
}

/* Dashboard Container */
.dashboard {
  width: 95%;
  max-width: 1400px;
  background: #1e1e1e;
  border-radius: 20px;
  padding: 40px;
  box-shadow: 0 20px 50px rgba(0,0,0,0.7);
  display: flex;
  flex-direction: column;
  gap: 35px;
}

/* Header */
.dashboard h2 {
  font-size: 36px;
  font-weight: 700;
  color: #00ffff;
  text-shadow: 0 0 10px #00ffff;
  margin: 0;
}

.dashboard p {
  font-size: 16px;
  color: #ccc;
  margin: 5px 0 25px 0;
}

/* Cards */
.cards {
  display: flex;
  gap: 25px;
  flex-wrap: wrap;
}

.card {
  flex: 1 1 200px;
  background: linear-gradient(145deg,#1c1c1c,#2c2c2c);
  border-radius: 15px;
  padding: 25px 20px;
  text-align: center;
  border-left: 4px solid #00ffff;
  box-shadow: 0 10px 25px rgba(0,0,0,0.5);
  transition: 0.3s all;
}

.card:hover {
  transform: translateY(-5px);
  box-shadow: 0 15px 40px rgba(0,255,255,0.5);
}

.card h3 {
  font-size: 28px;
  margin-bottom: 10px;
  color: #00ffff;
}

.card p {
  font-size: 16px;
  color: #aaa;
}

/* Chart Box */
.chart-box {
  background: #1a1a1a;
  border-radius: 20px;
  padding: 30px;
  border: 1px solid #333;
  box-shadow: inset 0 0 15px rgba(0,255,255,0.1);
}

/* Chart */
canvas {
  width: 100% !important;
  height: 450px !important;
}
</style>
</head>
<body>

<div class="dashboard">
  <h2>Real-time Monitoring • Temperature • Humidity • Water Levels</h2>
 

  <div class="cards">
    <div class="card"><h3 id="tempVal">--</h3><p>Temperature (°C)</p></div>
    <div class="card"><h3 id="humVal">--</h3><p>Humidity (%)</p></div>
    <div class="card"><h3 id="water1Val">--</h3><p>Water 1 Level</p></div>
    <div class="card"><h3 id="water2Val">--</h3><p>Water 2 Level</p></div>
  </div>

  <div class="chart-box">
    <canvas id="sensorChart"></canvas>
  </div>
</div>

<script>
const url = "https://script.google.com/macros/s/AKfycbwEDijVULSbBQaJgyOwIsbbT8WB1JvqG0AbJrpBDPDMJfQ-iEHVCI6DXs_J7YLv0b4/exec";


let chart;

function loadData() {
  fetch(url)
    .then(res => res.json())
    .then(rows => {
      let labels = [];
      let temp = [];
      let hum = [];
      let water1 = [];
      let water2 = [];

      rows.forEach(r => {
        labels.push(`${r.date} ${r.time}`);
        temp.push(r.temp);
        hum.push(r.hum);
        water1.push(r.water1);
        water2.push(r.water2);
      });

      if(rows.length>0){
        const last = rows[rows.length-1];
        document.getElementById("tempVal").innerText = last.temp;
        document.getElementById("humVal").innerText = last.hum;
        document.getElementById("water1Val").innerText = last.water1;
        document.getElementById("water2Val").innerText = last.water2;
      }

      if (!chart) {
        chart = new Chart(document.getElementById("sensorChart"), {
          type: "line",
          data: {
            labels: labels,
            datasets: [
              { label:"Temperature", data:temp, borderColor:"#ff8c00", backgroundColor:"rgba(255,140,0,0.2)", borderWidth:3, tension:0.4, pointRadius:5, pointBackgroundColor:"#ff8c00" },
              { label:"Humidity", data:hum, borderColor:"#1e90ff", backgroundColor:"rgba(30,144,255,0.2)", borderWidth:3, tension:0.4, pointRadius:5, pointBackgroundColor:"#1e90ff" },
              { label:"Water 1", data:water1, borderColor:"#32cd32", backgroundColor:"rgba(50,205,50,0.2)", borderWidth:3, tension:0.4, pointRadius:5, pointBackgroundColor:"#32cd32" },
              { label:"Water 2", data:water2, borderColor:"#ff1493", backgroundColor:"rgba(255,20,147,0.2)", borderWidth:3, tension:0.4, pointRadius:5, pointBackgroundColor:"#ff1493" }
            ]
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            interaction: { mode: 'nearest', intersect: false },
            scales: {
              x: { ticks: { color:"#fff" }, grid: { color:"rgba(255,255,255,0.05)" } },
              y: { beginAtZero: true, ticks: { color:"#fff" }, grid: { color:"rgba(255,255,255,0.05)" } }
            },
            plugins: {
              legend: { labels: { color:"#fff", boxWidth:14, font:{size:14} } },
              tooltip: { backgroundColor: '#111', titleColor:'#ff8c00', bodyColor:'#fff', borderColor:'#ff8c00', borderWidth:1 }
            }
          }
        });
      } else {
        chart.data.labels = labels;
        chart.data.datasets[0].data = temp;
        chart.data.datasets[1].data = hum;
        chart.data.datasets[2].data = water1;
        chart.data.datasets[3].data = water2;
        chart.update();
      }
    });
}

loadData();
setInterval(loadData, 10000);
</script>

</body>
</html>

